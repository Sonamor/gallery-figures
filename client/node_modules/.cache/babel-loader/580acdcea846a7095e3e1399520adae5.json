{"remainingRequest":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\src\\components\\FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\src\\components\\FileUpload.vue","mtime":1586370125438},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxheWF0b1xcRG9jdW1lbnRzXFxHaXRIdWJcXGdhbGxlcnktbWFwLWNhclxcY2xpZW50XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFZ1ZUNyb3BwZXIgZnJvbSAndnVlLWNyb3BwZXJqcyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMKCmltcG9ydCAnY3JvcHBlcmpzL2Rpc3QvY3JvcHBlci5jc3MnOwppbXBvcnQgYXV0aEhlYWRlciBmcm9tICcuLi9zZXJ2aWNlcy9hdXRoSGVhZGVyJzsKaW1wb3J0IEFsZXJ0cyBmcm9tICdAL2NvbXBvbmVudHMvQWxlcnRzLnZ1ZSc7CmltcG9ydCBidXMgZnJvbSAnLi4vLi4vYnVzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdGaWxlVXBsb2FkJywKICBjb21wb25lbnRzOiB7CiAgICBWdWVDcm9wcGVyOiBWdWVDcm9wcGVyLAogICAgQWxlcnRzOiBBbGVydHMKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWxlOiAnJywKICAgICAgaW1nU3JjOiAnJywKICAgICAgY3JvcEltZzogJycsCiAgICAgIGRhdGE6IG51bGwsCiAgICAgIGFsZXJ0czogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBidXMuJG9uKCdmaWxlVXBsb2FkU3VibWl0JywgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXMub25TdWJtaXQoKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgLy8gZ2V0IGltYWdlIGRhdGEgZm9yIHBvc3QgcHJvY2Vzc2luZywgZS5nLiB1cGxvYWQgb3Igc2V0dGluZyBpbWFnZSBzcmMKICAgIGNyb3BJbWFnZTogZnVuY3Rpb24gY3JvcEltYWdlKCkgewogICAgICB0aGlzLmNyb3BJbWcgPSB0aGlzLiRyZWZzLmNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcygpLnRvRGF0YVVSTCgpOwogICAgfSwKICAgIC8vIEZsaXAgaW1hZ2Ugb24gWCBheGlzCiAgICBmbGlwWDogZnVuY3Rpb24gZmxpcFgoKSB7CiAgICAgIHZhciBkb20gPSB0aGlzLiRyZWZzLmZsaXBYOwogICAgICB2YXIgc2NhbGUgPSBkb20uZ2V0QXR0cmlidXRlKCdkYXRhLXNjYWxlJyk7CiAgICAgIHNjYWxlID0gc2NhbGUgPyAtc2NhbGUgOiAtMTsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLnNjYWxlWChzY2FsZSk7CiAgICAgIGRvbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnLCBzY2FsZSk7CiAgICB9LAogICAgLy8gRmxpcCBpbWFnZSBvbiBZIGF4aXMKICAgIGZsaXBZOiBmdW5jdGlvbiBmbGlwWSgpIHsKICAgICAgdmFyIGRvbSA9IHRoaXMuJHJlZnMuZmxpcFk7CiAgICAgIHZhciBzY2FsZSA9IGRvbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnKTsKICAgICAgc2NhbGUgPSBzY2FsZSA/IC1zY2FsZSA6IC0xOwogICAgICB0aGlzLiRyZWZzLmNyb3BwZXIuc2NhbGVZKHNjYWxlKTsKICAgICAgZG9tLnNldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScsIHNjYWxlKTsKICAgIH0sCiAgICAvLyBNb3ZlIHRoZSBpbWFnZQogICAgbW92ZTogZnVuY3Rpb24gbW92ZShvZmZzZXRYLCBvZmZzZXRZKSB7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5tb3ZlKG9mZnNldFgsIG9mZnNldFkpOwogICAgfSwKICAgIC8vIFJlc2V0IHRoZSBjcm9wcGVyIG1hc2sKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLnJlc2V0KCk7CiAgICB9LAogICAgLy8gUm90YXRlIHRoZSBpbWFnZQogICAgcm90YXRlOiBmdW5jdGlvbiByb3RhdGUoZGVnKSB7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5yb3RhdGUoZGVnKTsKICAgIH0sCiAgICAvLyBTZXQgaW1hZ2UgaW4gY3JvcHBlcmpzCiAgICBzZXRJbWFnZTogZnVuY3Rpb24gc2V0SW1hZ2UoZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CgogICAgICBpZiAoZmlsZS50eXBlLmluZGV4T2YoJ2ltYWdlLycpID09PSAtMSkgewogICAgICAgIGFsZXJ0KCdWZXVpbGxleiBzw6lsZWN0aW9ubmVyIHVuIGZpY2hpZXIgaW1hZ2UnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2YgRmlsZVJlYWRlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICBfdGhpczIuaW1nU3JjID0gZXZlbnQudGFyZ2V0LnJlc3VsdDsKCiAgICAgICAgICBfdGhpczIuJHJlZnMuY3JvcHBlci5yZXBsYWNlKGV2ZW50LnRhcmdldC5yZXN1bHQpOwogICAgICAgIH07CgogICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdEw6lzb2zDqSwgRmlsZVJlYWRlciBBUEkgblwnZXN0IHBhcyBzdXBwb3J0w6knKTsKICAgICAgfQogICAgfSwKICAgIC8vIFNob3cgdGhlIHNlbGVjdGVkIGltYWdlCiAgICBzaG93RmlsZUNob29zZXI6IGZ1bmN0aW9uIHNob3dGaWxlQ2hvb3NlcigpIHsKICAgICAgdGhpcy4kcmVmcy5pbnB1dC5jbGljaygpOwogICAgfSwKICAgIC8vIFpvb20gb24gdGhlIGltYWdlCiAgICB6b29tOiBmdW5jdGlvbiB6b29tKHBlcmNlbnQpIHsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLnJlbGF0aXZlWm9vbShwZXJjZW50KTsKICAgIH0sCiAgICAvLyBTdWJtaXQgdGhlIGltYWdlIGFuZCB1cGxvYWQgaXQgb24gdGhlIHNlcnZlcgogICAgb25TdWJtaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9vblN1Ym1pdCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy4kcmVmcy5jcm9wcGVyKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRyZWZzLmNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcygpLnRvQmxvYigKICAgICAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICAgICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGJsb2IpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYWxsb3dlZFR5cGVzLCBmaWxlLCBmb3JtRGF0YTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbWFnZSB2ZXJmaWNhdGlvbiA6IGV4dGVuc2lvbiBhbmQgc2l6ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dlZFR5cGVzID0gWydpbWFnZS9qcGVnJywgJ2ltYWdlL2pwZycsICdpbWFnZS9wbmcnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUgPSBfdGhpczMuJHJlZnMuaW5wdXQuZmlsZXNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuZmlsZSA9IGZpbGU7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxvd2VkVHlwZXMuaW5jbHVkZXMoZmlsZS50eXBlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuYWxlcnRzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTZXVsZXMgbGVzIGltYWdlcyBzb250IGFjY2VwdMOpZXMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0Vycm9yOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLnNpemUgPiA1MDAwMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5hbGVydHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0xcJ2ltYWdlIGTDqXBhc3NlIDUwMCBrYicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRXJyb3I6IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsgLy8gUGFzcyB0aGUgaW1hZ2UgZmlsZSBuYW1lIGFzIHRoZSB0aGlyZCBwYXJhbWV0ZXIgaWYgbmVjZXNzYXJ5LgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGJsb2IsIF90aGlzMy5maWxlLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS91cGxvYWQnLCBmb3JtRGF0YSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBhdXRoSGVhZGVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmFsZXJ0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ltYWdlIHNhdXZlZ2FyZMOpZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0Vycm9yOiBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLiRlbWl0KCd1cGxvYWRlZEZpbGUnLCBfdGhpczMuZmlsZS5uYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmFsZXJ0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogX2NvbnRleHQudDAucmVzcG9uc2UuZGF0YS5lcnJvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRXJyb3I6IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s3LCAxNF1dKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgICByZXR1cm4gX29uU3VibWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvblN1Ym1pdDsKICAgIH0oKQogIH0KfTs="},{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"px-4 py-2\">\n    <Alerts :alerts=\"alerts\"/>\n    <form enctype=\"multipart/form-data\" @submit.prevent=\"onSubmit\" ref=\"fileUploadForm\">\n      <div class=\"fields\">\n          <div class=\"w-full font-bold m-1 text-gray-500\">Nouvelle image</div>\n          <input\n            ref=\"input\"\n            type=\"file\"\n            name=\"image\"\n            accept=\"image/*\"\n            @change=\"setImage\"\n            class=\"hidden\"\n          />\n          <div class=\"inline-flex m-1\">\n            <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded\"\n              href=\"#\"\n              role=\"button\"\n              @click.prevent=\"showFileChooser\"\n            >\n              Choisir une image\n            </a>\n          </div>\n          <div>\n            <section class=\"w-full flex flex-row\">\n              <div class=\"img-cropper flex-1 m-1\">\n                <vue-cropper\n                  ref=\"cropper\"\n                  v-if=\"imgSrc !== ''\"\n                  :aspect-ratio=\"16 / 9\"\n                  :src=\"imgSrc\"\n                  preview=\".preview\"\n                />\n              </div>\n              <div class=\"flex-1 relative mt-1\" v-if=\"imgSrc !== ''\">\n                <p class=\"preview-label\">Preview</p>\n                <div class=\"preview overflow-hidden w-full\" />\n              </div>\n            </section>\n            <section class=\"w-full\" v-if=\"imgSrc !== ''\">\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"zoom(0.2)\">\n                  Zoom +\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"zoom(-0.2)\">\n                  Zoom -\n                </a>\n              </div>\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"move(-10, 0)\"\n                >\n                  ◄\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"move(10, 0)\"\n                >\n                  ►\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"move(0, -10)\"\n                >\n                  ▲\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"move(0, 10)\"\n                >\n                  ▼\n                </a>\n              </div>\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"rotate(90)\"\n                >\n                  +90°\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"rotate(-90)\"\n                >\n                  -90°\n                </a>\n              </div>\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  ref=\"flipX\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"flipX\"\n                >\n                  Flip X\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  ref=\"flipY\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"flipY\"\n                >\n                  Flip Y\n                </a>\n              </div>\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"cropImage\"\n                >\n                  Recadrer\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"reset\"\n                >\n                  Reset\n                </a>\n              </div>\n            </section>\n          </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport VueCropper from 'vue-cropperjs';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'cropperjs/dist/cropper.css';\nimport authHeader from '../services/authHeader';\nimport Alerts from '@/components/Alerts.vue';\nimport bus from '../../bus';\n\nexport default {\n  name: 'FileUpload',\n  components: { VueCropper, Alerts },\n  data() {\n    return {\n      file: '',\n      imgSrc: '',\n      cropImg: '',\n      data: null,\n      alerts: [],\n    };\n  },\n  created() {\n    bus.$on('fileUploadSubmit', () => this.onSubmit());\n  },\n  methods: {\n    // get image data for post processing, e.g. upload or setting image src\n    cropImage() {\n      this.cropImg = this.$refs.cropper.getCroppedCanvas().toDataURL();\n    },\n\n    // Flip image on X axis\n    flipX() {\n      const dom = this.$refs.flipX;\n      let scale = dom.getAttribute('data-scale');\n      scale = scale ? -scale : -1;\n      this.$refs.cropper.scaleX(scale);\n      dom.setAttribute('data-scale', scale);\n    },\n\n    // Flip image on Y axis\n    flipY() {\n      const dom = this.$refs.flipY;\n      let scale = dom.getAttribute('data-scale');\n      scale = scale ? -scale : -1;\n      this.$refs.cropper.scaleY(scale);\n      dom.setAttribute('data-scale', scale);\n    },\n\n    // Move the image\n    move(offsetX, offsetY) {\n      this.$refs.cropper.move(offsetX, offsetY);\n    },\n\n    // Reset the cropper mask\n    reset() {\n      this.$refs.cropper.reset();\n    },\n\n    // Rotate the image\n    rotate(deg) {\n      this.$refs.cropper.rotate(deg);\n    },\n\n    // Set image in cropperjs\n    setImage(e) {\n      const file = e.target.files[0];\n      if (file.type.indexOf('image/') === -1) {\n        alert('Veuillez sélectionner un fichier image');\n        return;\n      }\n      if (typeof FileReader === 'function') {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          this.imgSrc = event.target.result;\n          this.$refs.cropper.replace(event.target.result);\n        };\n\n        reader.readAsDataURL(file);\n      } else {\n        alert('Désolé, FileReader API n\\'est pas supporté');\n      }\n    },\n\n    // Show the selected image\n    showFileChooser() {\n      this.$refs.input.click();\n    },\n\n    // Zoom on the image\n    zoom(percent) {\n      this.$refs.cropper.relativeZoom(percent);\n    },\n\n    // Submit the image and upload it on the server\n    async onSubmit() {\n      console.log(this.$refs.cropper);\n      await this.$refs.cropper.getCroppedCanvas().toBlob(async (blob) => {\n        // Image verfication : extension and size\n        const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];\n\n        const file = this.$refs.input.files[0];\n        this.file = file;\n        if (!allowedTypes.includes(file.type)) {\n          this.alerts.push({ message: 'Seules les images sont acceptées', hasError: true });\n        }\n        if (file.size > 5000000) {\n          this.alerts.push({ message: 'L\\'image dépasse 500 kb', hasError: true });\n        }\n\n        const formData = new FormData();\n\n        // Pass the image file name as the third parameter if necessary.\n        formData.append('file', blob, this.file.name);\n\n        try {\n          await axios.post('http://localhost:3000/api/upload', formData, { headers: authHeader() });\n          this.alerts.push({ message: 'Image sauvegardée', hasError: false });\n          this.$emit('uploadedFile', this.file.name);\n        } catch (err) {\n          this.alerts.push({ message: err.response.data.error, hasError: true });\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style>\n.preview {\n  height: calc(372px * (9 / 16));\n}\n.preview-label {\n  position:absolute;\n  font-weight:bold;\n  background:#fff;\n  opacity:0.5;\n  z-index:9999;\n  width:100%;\n}\n</style>\n"],"sourceRoot":"src/components"}]}