{"remainingRequest":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\src\\components\\FileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\src\\components\\FileUpload.vue","mtime":1582074975564},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBWdWVDcm9wcGVyIGZyb20gJ3Z1ZS1jcm9wcGVyanMnOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzCmltcG9ydCAnY3JvcHBlcmpzL2Rpc3QvY3JvcHBlci5jc3MnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdGaWxlVXBsb2FkJywKICBjb21wb25lbnRzOiB7IFZ1ZUNyb3BwZXIgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsZTogJycsCiAgICAgIG1lc3NhZ2U6ICcnLAogICAgICBoYXNFcnJvcjogZmFsc2UsCiAgICAgIGltZ1NyYzogJycsCiAgICAgIGNyb3BJbWc6ICcnLAogICAgICBkYXRhOiBudWxsLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKCiAgICBjcm9wSW1hZ2UoKSB7CiAgICAgIC8vIGdldCBpbWFnZSBkYXRhIGZvciBwb3N0IHByb2Nlc3NpbmcsIGUuZy4gdXBsb2FkIG9yIHNldHRpbmcgaW1hZ2Ugc3JjCiAgICAgIHRoaXMuY3JvcEltZyA9IHRoaXMuJHJlZnMuY3JvcHBlci5nZXRDcm9wcGVkQ2FudmFzKCkudG9EYXRhVVJMKCk7CiAgICB9LAogICAgZmxpcFgoKSB7CiAgICAgIGNvbnN0IGRvbSA9IHRoaXMuJHJlZnMuZmxpcFg7CiAgICAgIGxldCBzY2FsZSA9IGRvbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnKTsKICAgICAgc2NhbGUgPSBzY2FsZSA/IC1zY2FsZSA6IC0xOwogICAgICB0aGlzLiRyZWZzLmNyb3BwZXIuc2NhbGVYKHNjYWxlKTsKICAgICAgZG9tLnNldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScsIHNjYWxlKTsKICAgIH0sCiAgICBmbGlwWSgpIHsKICAgICAgY29uc3QgZG9tID0gdGhpcy4kcmVmcy5mbGlwWTsKICAgICAgbGV0IHNjYWxlID0gZG9tLmdldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScpOwogICAgICBzY2FsZSA9IHNjYWxlID8gLXNjYWxlIDogLTE7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5zY2FsZVkoc2NhbGUpOwogICAgICBkb20uc2V0QXR0cmlidXRlKCdkYXRhLXNjYWxlJywgc2NhbGUpOwogICAgfSwKICAgIGdldENyb3BCb3hEYXRhKCkgewogICAgICB0aGlzLmRhdGEgPSBKU09OLnN0cmluZ2lmeSh0aGlzLiRyZWZzLmNyb3BwZXIuZ2V0Q3JvcEJveERhdGEoKSwgbnVsbCwgNCk7CiAgICB9LAogICAgZ2V0RGF0YSgpIHsKICAgICAgdGhpcy5kYXRhID0gSlNPTi5zdHJpbmdpZnkodGhpcy4kcmVmcy5jcm9wcGVyLmdldERhdGEoKSwgbnVsbCwgNCk7CiAgICB9LAogICAgbW92ZShvZmZzZXRYLCBvZmZzZXRZKSB7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5tb3ZlKG9mZnNldFgsIG9mZnNldFkpOwogICAgfSwKICAgIHJlc2V0KCkgewogICAgICB0aGlzLiRyZWZzLmNyb3BwZXIucmVzZXQoKTsKICAgIH0sCiAgICByb3RhdGUoZGVnKSB7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5yb3RhdGUoZGVnKTsKICAgIH0sCiAgICBzZXRDcm9wQm94RGF0YSgpIHsKICAgICAgaWYgKCF0aGlzLmRhdGEpIHJldHVybjsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLnNldENyb3BCb3hEYXRhKEpTT04ucGFyc2UodGhpcy5kYXRhKSk7CiAgICB9LAogICAgc2V0RGF0YSgpIHsKICAgICAgaWYgKCF0aGlzLmRhdGEpIHJldHVybjsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLnNldERhdGEoSlNPTi5wYXJzZSh0aGlzLmRhdGEpKTsKICAgIH0sCiAgICBzZXRJbWFnZShlKSB7CiAgICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgaWYgKGZpbGUudHlwZS5pbmRleE9mKCdpbWFnZS8nKSA9PT0gLTEpIHsKICAgICAgICBhbGVydCgnUGxlYXNlIHNlbGVjdCBhbiBpbWFnZSBmaWxlJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgRmlsZVJlYWRlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChldmVudCkgPT4gewogICAgICAgICAgdGhpcy5pbWdTcmMgPSBldmVudC50YXJnZXQucmVzdWx0OwogICAgICAgICAgLy8gcmVidWlsZCBjcm9wcGVyanMgd2l0aCB0aGUgdXBkYXRlZCBzb3VyY2UKICAgICAgICAgIC8vIHRoaXMuJHJlZnMuY3JvcHBlci5yZXBsYWNlKGV2ZW50LnRhcmdldC5yZXN1bHQpOwogICAgICAgIH07CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoJ1NvcnJ5LCBGaWxlUmVhZGVyIEFQSSBub3Qgc3VwcG9ydGVkJyk7CiAgICAgIH0KICAgIH0sCiAgICBzaG93RmlsZUNob29zZXIoKSB7CiAgICAgIHRoaXMuJHJlZnMuaW5wdXQuY2xpY2soKTsKICAgIH0sCiAgICB6b29tKHBlcmNlbnQpIHsKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLnJlbGF0aXZlWm9vbShwZXJjZW50KTsKICAgIH0sCiAgICBvblNlbGVjdCgpIHsKICAgICAgY29uc3QgYWxsb3dlZFR5cGVzID0gWydpbWFnZS9qcGVnJywgJ2ltYWdlL2pwZycsICdpbWFnZS9wbmcnXTsKICAgICAgY29uc3QgZmlsZSA9IHRoaXMuJHJlZnMuZmlsZS5maWxlc1swXTsKICAgICAgdGhpcy5maWxlID0gZmlsZTsKCiAgICAgIGlmICghYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGZpbGUudHlwZSkpIHsKICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnU2V1bGVzIGxlcyBpbWFnZXMgc29udCBhY2NlcHTDqWVzJzsKICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoZmlsZS5zaXplID4gNTAwMDAwMCkgewogICAgICAgIHRoaXMubWVzc2FnZSA9ICdMXCdpbWFnZSBkw6lwYXNzZSA1MDAga2InOwogICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgb25TdWJtaXQoKSB7CiAgICAgIGF3YWl0IHRoaXMuJHJlZnMuY3JvcHBlci5nZXRDcm9wcGVkQ2FudmFzKCkudG9CbG9iKGFzeW5jIChibG9iKSA9PiB7CiAgICAgICAgY29uc3QgYWxsb3dlZFR5cGVzID0gWydpbWFnZS9qcGVnJywgJ2ltYWdlL2pwZycsICdpbWFnZS9wbmcnXTsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLiRyZWZzKTsKICAgICAgICBjb25zdCBmaWxlID0gdGhpcy4kcmVmcy5pbnB1dC5maWxlc1swXTsKICAgICAgICB0aGlzLmZpbGUgPSBmaWxlOwogICAgICAgIGlmICghYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGZpbGUudHlwZSkpIHsKICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICdTZXVsZXMgbGVzIGltYWdlcyBzb250IGFjY2VwdMOpZXMnOwogICAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChmaWxlLnNpemUgPiA1MDAwMDAwKSB7CiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnTFwnaW1hZ2UgZMOpcGFzc2UgNTAwIGtiJzsKICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCiAgICAgICAgLy8gUGFzcyB0aGUgaW1hZ2UgZmlsZSBuYW1lIGFzIHRoZSB0aGlyZCBwYXJhbWV0ZXIgaWYgbmVjZXNzYXJ5LgogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGJsb2IsIHRoaXMuZmlsZS5uYW1lKTsKICAgICAgICAvLyBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCB0aGlzLmZpbGUpOwoKICAgICAgICBjb25zb2xlLmxvZyhibG9iKTsKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS91cGxvYWQnLCBmb3JtRGF0YSk7CiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnSW1hZ2Ugc2F1dmVnYXJkw6llJzsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwbG9hZGVkRmlsZScsIHRoaXMuZmlsZS5uYW1lKTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGVyci5yZXNwb25zZS5kYXRhLmVycm9yOwogICAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7CiAgICAgICAgfQogICAgICAgIC8vIFVzZSBgalF1ZXJ5LmFqYXhgIG1ldGhvZCBmb3IgZXhhbXBsZQogICAgICAgIC8qICQuYWpheCgnL3BhdGgvdG8vdXBsb2FkJywgewogICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICBkYXRhOiBmb3JtRGF0YSwKICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSwKICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSwKICAgICAgICAgIHN1Y2Nlc3MoKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWQgc3VjY2VzcycpOwogICAgICAgICAgfSwKICAgICAgICAgIGVycm9yKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnVXBsb2FkIGVycm9yJyk7CiAgICAgICAgICB9LAogICAgICAgIH0pOyAqLwogICAgICB9KTsKCiAgICAgIC8qIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuZmlsZSk7CgogICAgICB0cnkgewogICAgICAgIGF3YWl0IGF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdXBsb2FkJywgZm9ybURhdGEpOwogICAgICAgIHRoaXMubWVzc2FnZSA9ICdJbWFnZSBzYXV2ZWdhcmTDqWUnOwogICAgICAgIHRoaXMuJGVtaXQoJ3VwbG9hZGVkRmlsZScsIHRoaXMuZmlsZS5uYW1lKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3I7CiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7CiAgICAgIH0gKi8KICAgIH0sCiAgICBnZXRDbGFzcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAnYm9yZGVyIHB4LTQgcHktMyByb3VuZGVkIHJlbGF0aXZlIG10LTQnOiB0cnVlLAogICAgICAgICdiZy1yZWQtMTAwJzogdGhpcy5oYXNFcnJvciwKICAgICAgICAnYm9yZGVyLXJlZC00MDAnOiB0aGlzLmhhc0Vycm9yLAogICAgICAgICd0ZXh0LXJlZC03MDAnOiB0aGlzLmhhc0Vycm9yLAogICAgICAgICdiZy1ncmVlbi0xMDAnOiAhdGhpcy5oYXNFcnJvciwKICAgICAgICAnYm9yZGVyLWdyZWVuLTQwMCc6ICF0aGlzLmhhc0Vycm9yLAogICAgICAgICd0ZXh0LWdyZWVuLTcwMCc6ICF0aGlzLmhhc0Vycm9yLAogICAgICB9OwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["FileUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FileUpload.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"px-4 py-2\">\n    <form enctype=\"multipart/form-data\" @submit.prevent=\"onSubmit\">\n      <div class=\"fields\">\n          <div class=\"w-full font-bold\">Nouvelle image</div>\n          <!--<input type=\"file\" ref=\"file\" @change=\"onSelect\" class=\"mt-2\">-->\n          <input\n            ref=\"input\"\n            type=\"file\"\n            name=\"image\"\n            accept=\"image/*\"\n            @change=\"setImage\"\n            class=\"hidden\"\n          />\n          <div class=\"inline-flex m-1\">\n            <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded\"\n              href=\"#\"\n              role=\"button\"\n              @click.prevent=\"showFileChooser\"\n            >\n              Choisir une image\n            </a>\n          </div>\n          <div>\n            <section class=\"w-full flex flex-row\">\n              <div class=\"img-cropper flex-1 m-1\">\n                <vue-cropper\n                  ref=\"cropper\"\n                  v-if=\"imgSrc !== ''\"\n                  :aspect-ratio=\"16 / 9\"\n                  :src=\"imgSrc\"\n                  preview=\".preview\"\n                />\n              </div>\n              <div class=\"flex-1 relative mt-1\" v-if=\"imgSrc !== ''\">\n                <p class=\"preview-label\">Preview</p>\n                <div class=\"preview overflow-hidden w-full\" />\n              </div>\n            </section>\n            <section class=\"w-full\" v-if=\"imgSrc !== ''\">\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"zoom(0.2)\">\n                  Zoom +\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"zoom(-0.2)\">\n                  Zoom -\n                </a>\n              </div>\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"move(-10, 0)\"\n                >\n                  ◄\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"move(10, 0)\"\n                >\n                  ►\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"move(0, -10)\"\n                >\n                  ▲\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"move(0, 10)\"\n                >\n                  ▼\n                </a>\n              </div>\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"rotate(90)\"\n                >\n                  +90°\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"rotate(-90)\"\n                >\n                  -90°\n                </a>\n              </div>\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  ref=\"flipX\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"flipX\"\n                >\n                  Flip X\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  ref=\"flipY\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"flipY\"\n                >\n                  Flip Y\n                </a>\n              </div>\n              <div class=\"inline-flex m-1\">\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"cropImage\"\n                >\n                  Recadrer\n                </a>\n                <a class=\"bg-gray-300 text-xs hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r\"\n                  href=\"#\"\n                  role=\"button\"\n                  @click.prevent=\"reset\"\n                >\n                  Reset\n                </a>\n              </div>\n            </section>\n          </div>\n      </div>\n      <div class=\"fields\" v-if=\"imgSrc !== ''\">\n        <button class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold px-2 rounded focus:outline-none focus:shadow-outline mt-4\">Valider</button>\n      </div>\n      <div v-bind:class=\"getClass()\" role=\"alert\" v-if=\"message != ''\">\n        <span class=\"block sm:inline\">{{ message }}</span>\n        <span class=\"absolute top-0 bottom-0 right-0 px-4 py-3\">\n          <svg @click=\"message = ''\" class=\"fill-current h-6 w-6\" role=\"button\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><title>Close</title><path d=\"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z\"/></svg>\n        </span>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport VueCropper from 'vue-cropperjs';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'cropperjs/dist/cropper.css';\n\nexport default {\n  name: 'FileUpload',\n  components: { VueCropper },\n  data() {\n    return {\n      file: '',\n      message: '',\n      hasError: false,\n      imgSrc: '',\n      cropImg: '',\n      data: null,\n    };\n  },\n  methods: {\n\n    cropImage() {\n      // get image data for post processing, e.g. upload or setting image src\n      this.cropImg = this.$refs.cropper.getCroppedCanvas().toDataURL();\n    },\n    flipX() {\n      const dom = this.$refs.flipX;\n      let scale = dom.getAttribute('data-scale');\n      scale = scale ? -scale : -1;\n      this.$refs.cropper.scaleX(scale);\n      dom.setAttribute('data-scale', scale);\n    },\n    flipY() {\n      const dom = this.$refs.flipY;\n      let scale = dom.getAttribute('data-scale');\n      scale = scale ? -scale : -1;\n      this.$refs.cropper.scaleY(scale);\n      dom.setAttribute('data-scale', scale);\n    },\n    getCropBoxData() {\n      this.data = JSON.stringify(this.$refs.cropper.getCropBoxData(), null, 4);\n    },\n    getData() {\n      this.data = JSON.stringify(this.$refs.cropper.getData(), null, 4);\n    },\n    move(offsetX, offsetY) {\n      this.$refs.cropper.move(offsetX, offsetY);\n    },\n    reset() {\n      this.$refs.cropper.reset();\n    },\n    rotate(deg) {\n      this.$refs.cropper.rotate(deg);\n    },\n    setCropBoxData() {\n      if (!this.data) return;\n      this.$refs.cropper.setCropBoxData(JSON.parse(this.data));\n    },\n    setData() {\n      if (!this.data) return;\n      this.$refs.cropper.setData(JSON.parse(this.data));\n    },\n    setImage(e) {\n      const file = e.target.files[0];\n      if (file.type.indexOf('image/') === -1) {\n        alert('Please select an image file');\n        return;\n      }\n      if (typeof FileReader === 'function') {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          this.imgSrc = event.target.result;\n          // rebuild cropperjs with the updated source\n          // this.$refs.cropper.replace(event.target.result);\n        };\n        reader.readAsDataURL(file);\n      } else {\n        alert('Sorry, FileReader API not supported');\n      }\n    },\n    showFileChooser() {\n      this.$refs.input.click();\n    },\n    zoom(percent) {\n      this.$refs.cropper.relativeZoom(percent);\n    },\n    onSelect() {\n      const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];\n      const file = this.$refs.file.files[0];\n      this.file = file;\n\n      if (!allowedTypes.includes(file.type)) {\n        this.message = 'Seules les images sont acceptées';\n        this.hasError = true;\n      }\n      if (file.size > 5000000) {\n        this.message = 'L\\'image dépasse 500 kb';\n        this.hasError = true;\n      }\n    },\n    async onSubmit() {\n      await this.$refs.cropper.getCroppedCanvas().toBlob(async (blob) => {\n        const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];\n        console.log(this.$refs);\n        const file = this.$refs.input.files[0];\n        this.file = file;\n        if (!allowedTypes.includes(file.type)) {\n          this.message = 'Seules les images sont acceptées';\n          this.hasError = true;\n        }\n        if (file.size > 5000000) {\n          this.message = 'L\\'image dépasse 500 kb';\n          this.hasError = true;\n        }\n\n        const formData = new FormData();\n\n        // Pass the image file name as the third parameter if necessary.\n        formData.append('file', blob, this.file.name);\n        // formData.append('file', this.file);\n\n        console.log(blob);\n        try {\n          await axios.post('http://localhost:3000/api/upload', formData);\n          this.message = 'Image sauvegardée';\n          this.$emit('uploadedFile', this.file.name);\n        } catch (err) {\n          this.message = err.response.data.error;\n          this.hasError = true;\n        }\n        // Use `jQuery.ajax` method for example\n        /* $.ajax('/path/to/upload', {\n          method: \"POST\",\n          data: formData,\n          processData: false,\n          contentType: false,\n          success() {\n            console.log('Upload success');\n          },\n          error() {\n            console.log('Upload error');\n          },\n        }); */\n      });\n\n      /* const formData = new FormData();\n      formData.append('file', this.file);\n\n      try {\n        await axios.post('http://localhost:3000/api/upload', formData);\n        this.message = 'Image sauvegardée';\n        this.$emit('uploadedFile', this.file.name);\n      } catch (err) {\n        this.message = err.response.data.error;\n        this.hasError = true;\n      } */\n    },\n    getClass() {\n      return {\n        'border px-4 py-3 rounded relative mt-4': true,\n        'bg-red-100': this.hasError,\n        'border-red-400': this.hasError,\n        'text-red-700': this.hasError,\n        'bg-green-100': !this.hasError,\n        'border-green-400': !this.hasError,\n        'text-green-700': !this.hasError,\n      };\n    },\n  },\n};\n</script>\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n.preview {\n  height: calc(372px * (9 / 16));\n}\n.preview-label {\n  position:absolute;\n  font-weight:bold;\n  background:#fff;\n  opacity:0.5;\n  z-index:9999;\n  width:100%;\n}\n</style>\n"]}]}