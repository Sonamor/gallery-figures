{"remainingRequest":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\src\\components\\Login.vue","mtime":1586135657561},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ayato\\Documents\\GitHub\\gallery-map-car\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyJzsKaW1wb3J0IEFsZXJ0cyBmcm9tICdAL2NvbXBvbmVudHMvQWxlcnRzLnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnRzOiB7CiAgICBBbGVydHMsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogbmV3IFVzZXIoJycsICcnKSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGVycm9yczogbmV3IE1hcCgpLAogICAgICBhbGVydHM6IFtdLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyBDaGVjayBpZiBhbiB1c2VyIGlzIGxvZ2dlZCBpbgogICAgbG9nZ2VkSW4oKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLnN0YXR1cy5sb2dnZWRJbjsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gSWYgYW55IHVzZXIgaXMgbG9nZ2VkIGluLCB3ZSByZWRpcmVjdCB0byB0aGUgbWFpbiBwYWdlCiAgICBpZiAodGhpcy5sb2dnZWRJbikgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2dhbGxlcnknKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIExvZyB0aGUgdXNlciBpZiBoZSBkZWxpdmVycyB0aGUgcmlnaHQgY3JlZGVudGlhbHMKICAgIGhhbmRsZUxvZ2luKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwoKICAgICAgaWYgKHRoaXMudXNlci51c2VybmFtZSAmJiB0aGlzLnVzZXIucGFzc3dvcmQpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYXV0aC9sb2dpbicsIHRoaXMudXNlcikudGhlbigKICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9nYWxsZXJ5Jyk7CiAgICAgICAgICB9LAogICAgICAgICAgKGVycm9yKSA9PiB7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmFsZXJ0cy5wdXNoKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlKQogICAgICAgICAgICAgIHx8IGVycm9yLm1lc3NhZ2UKICAgICAgICAgICAgICB8fCBlcnJvci50b1N0cmluZygpLAogICAgICAgICAgICAgIGhhc0Vycm9yOiB0cnVlLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgICAgfQogICAgfSwKICAgIGNsb3NlQWxlcnQoKSB7CiAgICAgIHRoaXMub3V0cHV0ID0gJyc7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"login fixed w-screen h-screen xl:p-16 xl:px-48 lg:p-10 lg:px-24 md:p-6 md:px-20 p-4 px-16 top-0 left-0 flex justify-center\">\n    <div class=\"login-container w-full h-full max-w-2xl absolute\">\n      <form class=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\" @submit.prevent=\"handleLogin\" method=\"post\">\n        <div class=\"mb-4\">\n          <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"username\">\n            Utilisateur\n          </label>\n          <input\n            v-model=\"user.username\"\n            type=\"text\"\n            class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            name=\"username\"\n            id=\"username\"\n            placeholder=\"Utilisateur\"\n          />\n          <div\n            v-if=\"errors.has('username')\"\n            class=\"text-red-500 text-xs italic\"\n            role=\"alert\"\n          >Veuillez saisir un utilisateur</div>\n        </div>\n        <div class=\"mb-6\">\n          <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"password\">\n            Mot de passe\n          </label>\n          <input\n            v-model=\"user.password\"\n            type=\"password\"\n            class=\"shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\n            name=\"password\"\n            id=\"password\"\n            placeholder=\"******************\"\n          />\n          <div\n            v-if=\"errors.has('password')\"\n            class=\"text-red-500 text-xs italic\"\n            role=\"alert\"\n          >Veuillez saisir un mot de passe</div>\n        </div>\n        <div class=\"flex items-center justify-between\">\n          <button class=\"bg-blue-500 align-baseline hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\" :disabled=\"loading\" type=\"submit\">\n            Se connecter\n          </button>\n        </div>\n      </form>\n\n      <Alerts :alerts=\"alerts\" />\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport User from '../models/user';\nimport Alerts from '@/components/Alerts.vue';\n\nexport default {\n  name: 'Login',\n  components: {\n    Alerts,\n  },\n  data() {\n    return {\n      user: new User('', ''),\n      loading: false,\n      errors: new Map(),\n      alerts: [],\n    };\n  },\n  computed: {\n    // Check if an user is logged in\n    loggedIn() {\n      return this.$store.state.auth.status.loggedIn;\n    },\n  },\n  created() {\n    // If any user is logged in, we redirect to the main page\n    if (this.loggedIn) {\n      this.$router.push('/gallery');\n    }\n  },\n  methods: {\n    // Log the user if he delivers the right credentials\n    handleLogin() {\n      this.loading = true;\n\n      if (this.user.username && this.user.password) {\n        this.$store.dispatch('auth/login', this.user).then(\n          () => {\n            this.$router.push('/gallery');\n          },\n          (error) => {\n            this.loading = false;\n            this.alerts.push({\n              message: (error.response && error.response.data.message)\n              || error.message\n              || error.toString(),\n              hasError: true,\n            });\n          },\n        );\n      }\n    },\n    closeAlert() {\n      this.output = '';\n    },\n  },\n};\n</script>\n<style>\n  .cross-svg{\n    position: relative;\n    top: 50%;\n    -webkit-transform: translateY(-50%);\n    -ms-transform: translateY(-50%);\n    transform: translateY(-50%);\n    left: 0;\n    right: 0;\n    margin: auto;\n    text-align: center;\n  }\n</style>\n"]}]}